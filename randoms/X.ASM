
; *****************************************************************************

.model  large, c

; *****************************************************************************

PDATA segment para public 'PDATA'

	; Player and music segment

THEDRIVER_LEN equ 2538
THEDRIVER db 233,166,  6, 74, 67, 72, 38,  2,102,  1,  2,  0,  9, 65,100, 76,105, 98, 32
          db  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32
          db  32, 32, 32, 32, 32, 32, 32,213,  6,  1,231,  6,  1, 11,  7,  1, 29,  7,  1
          db  65,  7,  1, 25,  8,  0, 34,  8,  0,244,  8,  0,119,  7,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 32
          db  80,108, 97,121,101,114, 32,118, 48, 50, 46, 48, 49, 32, 40, 67, 41, 32, 67
          db 111,112,121,114,105,103,104,116, 32, 49, 57, 57, 50, 32, 74,101,110,115, 45
          db  67,104,114,105,115,116,105, 97,110, 32, 72,117,117,115, 46, 32,142,  6,207
          db   6, 51,219, 51,246,128,191,104,  0,  1,116,  3,233,226,  3,254,143, 16,  8
          db 125,  8,138,135, 25,  8,136,135, 16,  8,128,191, 16,  8,  0,117, 12,255,140
          db 231,  6,125,  3,233,136,  1,233,158,  2,128,191, 16,  8,  1,117,246,131,188
          db 231,  6,  0,117,239,199,  6,204,  6,  0,  0,139,172, 29,  7,  3,172, 47,  7
          db  38,139,126,  0,131,255,254,117, 29,198,135,104,  0,  0,199,132, 65,  7,  0
          db   0,198,135, 34,  8,  0,198,135, 16,  8,  0,198,135,146,  7,  0,233, 15,  3
          db 131,255,255,117, 12, 38,139, 70,  2,209,224,137,132, 29,  7,235,187,139,215
          db 129,226,  0,240,129,250,  0,128,117, 26,139,215,129,226,255,  0,209,226,137
          db 148, 83,  7,139,215,129,226,  0, 15,116, 49,247,156, 83,  7,235, 43,209,231
          db 139, 46,209,  6, 38,  3,126,109,  3,253,139,172, 11,  7, 38,  3, 45,  3, 46
          db 209,  6, 38,139, 70,  0,131,132, 11,  7,  2, 61,255,255,117, 14,199,132, 11
          db   7,  0,  0,131,132, 29,  7,  2,233, 98,255,139,248, 37,  0,240, 61,  0,192
          db 117, 10,129,231,255, 15,137,188,213,  6,235, 68, 61,  0,144,117, 10,139,199
          db  36, 63,136,135,  7,  8,235, 53, 61,  0,112,117, 10,129,231,255, 15,137,188
          db 209,  7,235, 38, 61,  0,208,117, 14,129,231,255, 15,137,188,227,  7,137, 62
          db 204,  6,235, 19, 61,  0,224,117, 18,129,231,255, 15,247,223,137,188,227,  7
          db 137, 62,204,  6, 69, 69,235,136, 61,  0, 96,117, 12,137,188,249,  6,198,135
          db  34,  8,  0,233,133,  1,139,215,177,  8,211,239,131,231, 31,137,188,249,  6
          db 139,250,131,231,127,131,255,126,116, 10,131,255,  0,117, 13,198,135, 34,  8
          db   0,198,135,244,  8,  1,233, 92,  1,209,231,246,198, 32,116,  7,198,135,244
          db   8,  2,235, 10,198,135,244,  8,  0,198,135, 34,  8,  0,198,135, 43,  8, 32
          db 246,194,128,117,  4,  3,188, 83,  7,139,199,136,135,119,  7,139,133, 42,  9
          db 137,132,245,  7,161,204,  6,137,132,227,  7,198,135,146,  7,  0,233, 25,  1
          db 139,132,249,  6, 37,255, 15,137,132,231,  6, 51,237,129,188,249,  6,  0, 96
          db 115, 83,139,132,209,  7, 61,  0, 16,116, 20,136,135,146,  7,136,167,137,  7
          db 208,236,136,167,128,  7,199,132,209,  7,  0, 16,138,135,  7,  8,136,135, 88
          db   8,139,132,227,  7,137,132,101,  7,128,191,244,  8,  1,116,180,139,132,245
          db   7,137,132, 65,  7,128,191,244,  8,  2,116,165,138,135, 43,  8,136,135, 34
          db   8,139,172,213,  6,177,  4,211,229,139, 62,209,  6, 38,  3,109,111,  3,239
          db  38,138, 70,  7,136,135,152,  8, 38,138, 70, 11,136,135,182,  7, 60,  0,116
          db  27, 38,138, 70, 12,136,135,200,  7,139,253,131,199,  8,137,188,155,  7,198
          db 135,173,  7,  0,198,135,191,  7,  0,138,135, 24,  9,  4, 96, 38,138,102,  0
          db 232, 18,  2,138,135, 24,  9,  4,128, 38,138,102,  1,232,  5,  2, 38,138, 70
          db   2,136,135,120,  8,138,135, 24,  9,  4, 32, 38,138,102,  3,232,240,  1,138
          db 135, 24,  9,  4,224, 38,138,102,  4,232,227,  1,138,135, 33,  9,  4, 96, 38
          db 138,102,  5,232,214,  1,138,135, 33,  9,  4,128, 38,138,102,  6,232,201,  1
          db 138,135, 33,  9,  4, 32, 38,138,102,  8,232,188,  1,138,135, 33,  9,  4,224
          db  38,138,102,  9,232,175,  1, 38,138, 70, 10,136,135,184,  8,139,132,101,  7
          db   1,132, 65,  7, 50,228,138,135,146,  7,128,191,128,  7,  0,124, 22,  1,132
          db  65,  7,254,143,128,  7,127, 30,138,135,137,  7,246,216,136,135,128,  7,235
          db  18, 41,132, 65,  7,254,135,128,  7,117,  8,138,135,137,  7,136,135,128,  7
          db 138,135, 52,  8,  2,135, 88,  8,  2,  6,206,  6, 60, 63,126,  2,176, 63,136
          db 135,235,  8,128,191,182,  7,  0,116, 89,254,143,191,  7,125, 83,138,135,200
          db   7,136,135,191,  7,139,172,155,  7,128,191,173,  7,  0,117, 46, 38,138, 70
          db   3, 50,228,139,232, 77,209,229,209,229,  3, 46,211,  6,137,172,155,  7, 38
          db 138, 70,  2,254,192,136,135,173,  7, 38,128,126,  0,255,116,  8, 38,138, 70
          db   0,136,135,152,  8,254,143,173,  7,138,135,152,  8, 38,  2, 70,  1, 36, 63
          db 136,135,152,  8,138,135, 24,  9,  4, 64,138,167,120,  8,138,212,128,226,192
          db 128,228, 63, 58,167,235,  8,127,  4,138,167,235,  8, 10,226,232,211,  0,138
          db 135, 33,  9,  4, 64,138,167,152,  8,246,135,184,  8,  1,116, 20,138,212,128
          db 226,192,128,228, 63, 58,167,235,  8,127,  4,138,167,235,  8, 10,226,232,171
          db   0,138,195,  4,192,138,167,184,  8,232,160,  0,139,132, 65,  7,138,224,138
          db 195,  4,160,232,147,  0,139,132, 65,  7,  2,167, 34,  8,138,195,  4,176,232
          db 132,  0, 70, 70, 67,131,251,  9,116,  3,233,  9,252,  7, 31,203, 83, 50,255
          db 138,141, 24,  9,138,173, 33,  9, 50,228,138,193,  4, 32,232, 90,  0,138,197
          db   4, 32,232, 83,  0,138,193,  4,224,232, 76,  0,138,197,  4,224,232, 69,  0
          db 139,199,  4,160,232, 62,  0,139,199,  4,176,232, 55,  0,139,199,  4,192,232
          db  48,  0,180, 63,138,193,  4, 64,232, 39,  0,138,197,  4, 64,232, 32,  0,180
          db 255,138,193,  4, 96,232, 23,  0,138,193,  4,128,232, 16,  0,138,197,  4, 96
          db 232,  9,  0,138,197,  4,128,232,  2,  0, 91,195,138,216,136,167, 34,  8,235
          db  16, 83,138,216, 58,167, 34,  8,117,  2, 91,195,136,167, 34,  8, 91,186,136
          db   3,238,236,236,236,236,236,236, 66,138,196,238,236,236,236,236,236,236,236
          db 236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236,236
          db 236,236,195,250,184,  4, 96,232,206,255,184,  4,128,232,200,255, 74,236,138
          db 216,184,  2,255,232,190,255,184,  4, 33,232,184,255, 74,185,  0,  2,236,226
          db 253, 36,224, 52,192,117, 14,128,227,224,117,  9,184,  4, 96,232,160,255,248
          db 235,  1,249,  7, 31,251,203,128,227, 63,136, 30,206,  6,  7, 31,203,142,  6
          db 207,  6,177,  5,211,227,139, 54,209,  6, 38,  3, 92,107,  3,222, 51,246, 38
          db 131, 56,  0,116, 83, 38,139, 56,  3, 62,209,  6, 38,139,  5, 71, 71,137,188
          db  47,  7,139,254,209,239,136,133, 25,  8, 38,138, 65, 18, 36, 63,136,133, 52
          db   8,198,133,104,  0,  1,199,132, 11,  7,  0,  0,199,132, 29,  7,  0,  0, 38
          db 128,121, 18,128,115, 25,198,133, 16,  8,  0,199,132,231,  6,  0,  0,199,132
          db 101,  7,  0,  0,198,133, 88,  8,  0,232,155,254, 70, 70,131,254, 18,117,160
          db   7, 31,203,142,  6,207,  6,177,  5,211,227,139, 54,209,  6, 38,  3, 92,107
          db   3,222, 51,246, 51,255, 38,131, 56,  0,116, 22,128,189,104,  0,  1,116,  7
          db 198,133,104,  0,  1,235,  8,198,133,104,  0,  0,232, 95,254, 70, 70, 71,131
          db 255,  9,117,220,  7, 31,203,137, 30,207,  6,137, 14,209,  6,142,195,139,249
          db  38,139,117,115,  3,241,137, 54,211,  6,198,  6,206,  6,  0, 51,255,232, 52
          db 254,198,133,104,  0,  0, 71,131,255,  9,117,242,185, 67,  2,191,213,  6,140
          db 200,142,192, 50,192,252,243,170,176,  1,180, 32,232,153,254,176,  8,180,  0
          db 232,146,254,176,189,180,192,232,139,254,  7, 31,248,203, 30,  6, 14, 31,128
          db 252,  6,127,243,208,228,138,196, 50,228,139,240,255,164,190,  6, 86,  6,108
          db   6,162,  5,168,  0, 25,  6,152,  5, 91,  5,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
          db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  3,  4,  5, 11, 12, 13, 19, 20, 21
          db   0,  1,  2,  8,  9, 10, 16, 17, 18, 87,  1,107,  1,129,  1,152,  1,176,  1
          db 202,  1,229,  1,  2,  2, 32,  2, 65,  2, 99,  2,135,  2, 87,  5,107,  5,129
          db   5,152,  5,176,  5,202,  5,229,  5,  2,  6, 32,  6, 65,  6, 99,  6,135,  6
          db  87,  9,107,  9,129,  9,152,  9,176,  9,202,  9,229,  9,  2, 10, 32, 10, 65
          db  10, 99, 10,135, 10, 87, 13,107, 13,129, 13,152, 13,176, 13,202, 13,229, 13
          db   2, 14, 32, 14, 65, 14, 99, 14,135, 14, 87, 17,107, 17,129, 17,152, 17,176
          db  17,202, 17,229, 17,  2, 18, 32, 18, 65, 18, 99, 18,135, 18, 87, 21,107, 21
          db 129, 21,152, 21,176, 21,202, 21,229, 21,  2, 22, 32, 22, 65, 22, 99, 22,135
          db  22, 87, 25,107, 25,129, 25,152, 25,176, 25,202, 25,229, 25,  2, 26, 32, 26
          db  65, 26, 99, 26,135, 26, 87, 29,107, 29,129, 29,152, 29,176, 29,202, 29,229
          db  29,  2, 30, 32, 30, 65, 30, 99, 30,135, 30

	MusicOffset = $-PDATA                   ; Offset for the music

THESONG_LEN equ 3431
THESONG db  74, 67, 72, 38,  2,102,  0,  2, 50,  1,  0, 67,114,111,111,110,101,114, 32
        db  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32
        db  32, 32, 32, 32, 32, 84,104,111,109, 97,115, 32, 77,111,103,101,110,115,101
        db 110, 32, 40, 68, 82, 65, 88, 41, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,  0
        db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
        db   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,205,  0,119,  0,239,  0,255
        db  12,127,  1,255,255,235,  2,239,  2, 67,  3,117,  3,133,  3,225,  3, 69,  4
        db 107,  4,143,  4,195,  4, 31,  5, 69,  5,107,  5,137,  5,191,  5,249,  5, 31
        db   6, 45,  6,147,  6,249,  6,125,  7,255,  7, 73,  8,109,  8,147,  8,183,  8
        db 183,  8,221,  8,  3,  9,105,  9,207,  9,243,  9, 25, 10, 61, 10, 61, 10, 99
        db  10,137, 10,239, 10, 85, 11,121, 11,221, 11, 75, 12,175, 12,127,  1,179,  1
        db 229,  1, 23,  2, 73,  2,123,  2,173,  2,227,  2,231,  2,  0,  0,  0,  0,  0
        db   0,  8,  0,  0,  0,  0,  0,  0,  0,255,255,255,255, 63, 32,  0,255,255, 63
        db  32,  0,  0,  0,  0,  0,  0,  0,150, 20,  0, 33,  1,111, 51,  0,  0,  2,  0
        db   0,  0,  0,  0,  0,255, 54,  0, 33,  0,255,  1,  0,  2,  0, 12,  0,  0,  2
        db   0,  0,207,  5, 64, 33,  0,244, 54, 15, 32,  2, 10,  0,  0,  0,  0,  0,170
        db  36,  0, 33,  1,255,  4, 10, 33,  0,  6,  0,  0,  0,  0,  0,249, 21,  0, 33
        db   1,255,  1,  8,  0,  2,  2,  0,  0,  0,  0,  0,255, 38,  0, 32,  0,247,100
        db  16, 33,  1,  8,  0,  0,  0,  0,  0,207,  5, 70, 97,  0,255,  5, 16, 65,  0
        db   0,  0,  0,  0,  0,  0,255,  6,  0,  1,  0,244, 54, 15,  1,  0,  0,  0,  0
        db   0,  0,  0,  2,  0,  8,128, 16,  0,  8,128, 16,  0, 16,  0, 16,  0,  1,  0
        db   2,  0,  3,  0,  8,  0,  1,  0,  2,  0,  3,  0,  8,  0, 11,  0, 12,  0, 13
        db   0, 14,  0, 20,128, 19,  0, 20,  0, 19,  0, 20,  0,255,255,  0,  0,  2,  0
        db   8,128,  4,  0,  8,128,  5,  0,  4,  0,  5,  0,  4,  0,  5,  0,  4,  0,  5
        db   0,  4,  0,  5,  0,  4,  0,  5,  0,  9,  0,  9,  0,  9,  0, 21,  0,  4,  0
        db   5,  0,  4,  0,  5,  0,255,255,  0,  0,  2,  0,  8,128,  6,  0,  8,128,  7
        db   0,  6,  0,  7,  0,  6,  0,  7,  0,  6,  0,  7,  0,  6,  0,  7,  0,  6,  0
        db   7,  0, 10,  0, 10,  0, 15,  0, 22,  0, 17,  0, 18,  0, 17,  0, 18,  0,255
        db 255,  0,  0,  2,  0,  8,128, 23,  0,  8,128, 24,  0, 23,  0, 24,  0, 23,  0
        db  24,  0, 23,  0, 24,  0, 23,  0, 24,  0, 23,  0, 24,  0, 26,  0, 26,  0, 27
        db   0, 30,  0, 28,  0, 29,  0, 28,  0, 29,  0,255,255,  0,  0,  2,  0,  8,128
        db  31,  0,  8,128, 32,  0, 31,  0, 32,  0, 31,  0, 32,  0, 31,  0, 32,  0, 31
        db   0, 32,  0, 31,  0, 32,  0, 34,  0, 34,  0, 35,  0, 38,  0, 36,  0, 37,  0
        db  36,  0, 37,  0,255,255,  0,  0,  2,  0,  8,128, 39,  0,  8,128, 40,  0, 39
        db   0, 40,  0, 39,  0, 40,  0, 39,  0, 40,  0, 39,  0, 40,  0, 39,  0, 40,  0
        db  41,  0, 41,  0, 41,  0, 42,  0, 39,  0, 40,  0, 39,  0, 40,  0,255,255,  0
        db   0,  2,  0,  0,  0,  8,128, 16,  0,  8,128, 16,  0, 16,  0, 16,  0,  1,  0
        db   2,  0,  3,  0,  8,  0,  1,  0,  2,  0,  3,  0,  8,  0, 11,  0, 12,  0, 13
        db   0, 14,  0, 20,128, 19,  0, 20,  0, 19,  0, 20,  0,255,255,  1,  0,  2,  0
        db 254,255,  2,  0,254,255,  0,  0,255,255,  5,192,  0,144, 51,  0, 52, 32,126
        db   2,  4,116,126,  1,  0,  0, 45,  2,  4,117,126,  0, 24,144, 45,  1,  4,117
        db 126,  1,  0,144, 52,  3, 45,  3, 56,  0, 57, 32,126,  0,  0,  0,  4,116, 55
        db   7,  0,112,  5,224,126,  3, 50,  0, 24,208,126,  0, 52, 32,126,  1,  4,116
        db 126,  6, 51,  0, 52, 32,  0,  1, 55,  1,  0,  1, 57,  1,  0,  1,255,255,  7
        db 208, 55,  1, 57, 32,126,  0, 54,  3, 50,  3,  4,116, 45, 11, 45,  3, 47,  3
        db   4,116, 48,  7, 49,  0, 50, 32,126,  2,  4,116,126,  2, 47,  3, 43, 32,126
        db   2,  5,192, 40,  3,  4,208, 43,  3,255,255, 45, 32,126,  6,  8,116,126, 15
        db 126, 15,126, 15,126,  7,255,255,  7,192,  9,  3, 33,  1, 21,  0,  0,  0,  2
        db 192, 12,  0,  0,  2,  7,192, 19,  1, 21,  1,  9,  3, 21,  1, 33,  0,  0,  0
        db   2,192, 12,  0,  0,  2,  7,192, 11,  1, 23,  1, 12,  3, 36,  0,  0,  0, 24
        db   1,  2,192, 12,  0,  0,  2,  7,192, 24,  1, 36,  0,  0,  0, 12,  3, 24,  1
        db  36,  0,  0,  0,  2,192, 12,  0,  0,  0,  7,192, 24,  0,  0,  0, 13,  1, 25
        db   0,  0,  0,255,255,  7,192, 14,  2,  0,  0, 14,  1, 26,  0,  0,  0,  2,192
        db  12,  0,  0,  2,  7,192, 24,  1, 26,  0,  0,  0, 14,  3, 14,  1, 26,  0,  0
        db   0,  2,192, 12,  0,  0,  2,  7,192, 14,  1, 26,  1,  5,  3, 17,  1, 29,  0
        db   0,  0,  2,192, 12,  0,  0,  0,  7,192, 29,  0,  0,  0, 17,  1, 29,  0,  0
        db   0,  7,  3, 19,  1, 31,  0,  0,  0,  2,192, 12,  0,  0,  0,  7,192, 31,  1
        db  19,  1,  2,192, 12,  0,  0,  0,255,255,  4,192, 36,  0,  0,  6, 36,  0,  0
        db  10, 36,  0,  0,  6, 36,  0,  0,  2,  4,192, 36,  0,  0,  6, 36,  0,  0, 10
        db  36,  0,  0,  6, 36,  0,  0,  2,255,255, 38,  0,  0,  6, 38,  0,  0, 10, 38
        db   0,  0,  6, 38,  0,  0,  2,  4,192, 36,  0,  0,  6, 36,  0,  0,  6, 38,  0
        db   0,  6, 38,  0,  0,  6,255,255,126, 15,126,  0,  0, 10,  6,192, 60,  1, 62
        db   1, 15,208, 63,  0, 64, 32,  4,116, 67,  3, 60,  0,  0,  0, 63,  0, 64, 32
        db  62,  1,  4,116, 60,  3,  4,116, 62,  7, 60,  0,  4,116,126,  4, 57,  0,  0
        db   0,255,255,  7,192, 14,  3, 26,  1, 14,  0,  0,  0,  2,192, 12,  0,  0,  2
        db   7,192, 14,  1, 26,  1, 16,  3, 26,  1, 28,  0,  0,  0,  2,192, 12,  0,  0
        db   2,  7,192, 16,  1, 28,  1, 17,  3, 29,  0,  0,  0, 41,  1,  2,192, 12,  0
        db   0,  2,  7,192, 29,  1, 41,  0,  0,  0, 19,  3, 31,  1, 43,  0,  0,  0,  2
        db 192, 12,  0,  0,  0,  7,192, 31,  0,  0,  0, 43,  1, 31,  0,  0,  0,255,255
        db   4,192, 38,  0,  0,  6, 38,  0,  0,  6, 40,  0,  0,  6, 40,  0,  0,  6,  4
        db 192, 36,  0,  0,  6, 36,  0,  0,  6, 38,  0,  0,  6, 38,  0,  0,  6,255,255
        db   1,192, 53,  0,  4,117,126,  4, 52,  5, 50,  3,  4,117, 48,  5, 47,  5, 43
        db   3,  4,116, 41,  5, 40,  5, 36,  3,  4,116, 35,  5, 36,  5, 38,  3,255,255
        db  40,  5, 41,  5, 45,  3, 47,  5, 48,  5, 50,  3, 52,  5, 53,  5, 52, 32,126
        db   2,  4,116, 50, 11, 48,  1, 50,  1,255,255, 55,  1, 53,  1,  4,116, 48,  3
        db  45,  3, 41,  3, 53,  1, 52,  1,  4,116, 47,  3, 40,  3, 43,  3, 55,  1, 53
        db   1, 48,  3, 53,  1, 52,  1, 45,  3, 47,  1, 43,  1,  4,116, 38,  3, 48,  1
        db  47,  1,  4,116, 43,  3,255,255, 55,  1, 53,  1,  4,116, 48,  3, 45,  3, 41
        db   3, 53,  1, 52,  1,  4,116, 47,  3, 40,  3, 43,  3, 55,  1, 53,  1, 48,  3
        db  53,  1, 52,  1, 45,  1, 43,  1, 45,  3,  4,116,126,  1,  0,  1,  2,192, 19
        db   0,  0,  4, 33,  0,  0,  0,255,255,  4,192, 38,  0,  0, 10, 38,  0,  0,  2
        db  40,  0,  0, 10, 40,  0,  0,  2,  4,192, 36,  0,  0,  6, 36,  0,  0,  6, 38
        db   0,  0,  6, 38,  0,  0,  6,255,255,  0,192, 45,  0,  0, 15,  0, 15,  0, 15
        db   0, 14,255,255,  4,192, 40,  0,  0,  0, 40,  0,  0,  2, 40,  0,  0,  0,  4
        db 192, 40,  0,  0,  2,  4,192, 40,  0,  0,  2,  4,192, 40,  0,  0,  2,  4,192
        db  40,  0,  0,  0, 40,  0,  0,  2, 40,  0,  0,  0,  4,192, 40,  0,  0,  2,  4
        db 192, 40,  0,  0,  2, 40,  0,  0,  0,  4,192, 43,  0,  0,  2, 43,  0,  0,  2
        db  43,  0,  0,  0,  4,192, 36,  0,  0,  2, 36,  0,  0,  0,  4,192, 40,  0,  0
        db   2, 40,  0,  0,  2, 40,  0,  0,  0,255,255,  4,192, 45,  0,  0,  2, 45,  0
        db   0,  0,  4,192, 45,  0,  0,  2,  4,192, 45,  0,  0,  0, 45,  0,  0,  2,  4
        db 192, 42,  0,  0,  0, 42,  0,  0,  2, 42,  0,  0,  0,  4,192, 38,  0,  0,  2
        db  38,  0,  0,  2, 41,  0,  0,  2, 41,  0,  0,  0,  4,192, 41,  0,  0,  2, 41
        db   0,  0,  0,  4,192, 36,  0,  0,  2,  4,192, 43,  0,  0,  2, 43,  0,  0,  0
        db   4,192, 38,  0,  0,  2, 38,  0,  0,  0,  4,192, 38,  0,  0,  2,255,255,  6
        db 192, 40,  0,  0,  0, 45,  0,  0,  0, 48,  0,  0,  0, 40,  0,  0,  0, 45,  0
        db   0,  0, 48,  0,  0,  0, 40,  0,  0,  0, 45,  0,  0,  0, 48,  0,  0,  0, 40
        db   0,  0,  0, 45,  0,  0,  0, 48,  0,  0,  0, 40,  0,  0,  0, 45,  0,  0,  0
        db  48,  0,  0,  0, 47,  0,  0,  0, 40,  0,  0,  0, 43,  0,  0,  0, 48,  0,  0
        db   0, 40,  0,  0,  0, 43,  0,  0,  0, 48,  0,  0,  0, 40,  0,  0,  0, 43,  0
        db   0,  0, 48,  0,  0,  0, 40,  0,  0,  0, 43,  0,  0,  0, 48,  0,  0,  0, 40
        db   0,  0,  0, 43,  0,  0,  0, 48,  0,  0,  0, 40,  0,  0,  0,255,255, 42,  0
        db   0,  0, 45,  0,  0,  0, 50,  0,  0,  0, 42,  0,  0,  0, 45,  0,  0,  0, 50
        db   0,  0,  0, 42,  0,  0,  0, 45,  0,  0,  0, 50,  0,  0,  0, 42,  0,  0,  0
        db  45,  0,  0,  0, 50,  0,  0,  0, 42,  0,  0,  0, 45,  0,  0,  0, 50,  0,  0
        db   0, 42,  0,  0,  0, 36,  0,  0,  0, 41,  0,  0,  0, 45,  0,  0,  0, 36,  0
        db   0,  0, 41,  0,  0,  0, 45,  0,  0,  0, 36,  0,  0,  0, 41,  0,  0,  0, 43
        db   0,  0,  0, 47,  0,  0,  0, 50,  0,  0,  0, 43,  0,  0,  0, 47,  0,  0,  0
        db  50,  0,  0,  0, 43,  0,  0,  0, 47,  0,  0,  0,255,255,  7,192, 14,  3, 26
        db   1, 14,  0,  0,  0,  2,192, 12,  0,  0,  2,  7,192, 14,  1, 26,  1, 16,  3
        db  26,  1, 28,  0,  0,  0,  2,192, 12,  0,  0,  2,  7,192, 16,  1, 28,  1, 17
        db   3, 29,  0,  0,  0, 41,  1,  2,192, 12,  0,  0,  2,  7,192, 29,  1, 41,  0
        db   0,  0,  9,  7, 26,  0, 14,224,126,  6,255,255,  4,192, 38,  0,  0, 10, 38
        db   0,  0,  2, 40,  0,  0, 10, 40,  0,  0,  2,  4,192, 36,  0,  0,  6, 36,  0
        db   0,  6,  4,192, 40,  0,  0, 14,255,255,  4,192, 40,  0,  0,  6, 40,  0,  0
        db  10, 40,  0,  0,  6, 40,  0,  0,  2,  4,192, 40,  0,  0,  6, 40,  0,  0, 10
        db  40,  0,  0,  6, 40,  0,  0,  2,255,255, 42,  0,  0,  6, 42,  0,  0, 10, 42
        db   0,  0,  6, 42,  0,  0,  2,  4,192, 41,  0,  0,  6, 41,  0,  0,  6, 43,  0
        db   0,  6, 43,  0,  0,  6,255,255,  4,192, 41,  0,  0,  6, 41,  0,  0,  6, 43
        db   0,  0,  6, 43,  0,  0,  6,  4,192, 41,  0,  0,  6, 41,  0,  0,  6, 43,  0
        db   0,  6, 43,  0,  0,  6,255,255,  4,192, 41,  0,  0, 10, 41,  0,  0,  2, 43
        db   0,  0, 10, 43,  0,  0,  2,  4,192, 41,  0,  0,  6, 41,  0,  0,  6, 43,  0
        db   0,  6, 43,  0,  0,  6,255,255,  4,192, 45,  0,  0,  0, 45,  0,  0,  2, 45
        db   0,  0,  0,  4,192, 45,  0,  0,  2,  4,192, 45,  0,  0,  2,  4,192, 45,  0
        db   0,  2,  4,192, 45,  0,  0,  0, 45,  0,  0,  2, 45,  0,  0,  0,  4,192, 45
        db   0,  0,  2,  4,192, 43,  0,  0,  2, 43,  0,  0,  0,  4,192, 48,  0,  0,  2
        db  48,  0,  0,  2, 48,  0,  0,  0,  4,192, 40,  0,  0,  2, 40,  0,  0,  0,  4
        db 192, 43,  0,  0,  2, 43,  0,  0,  2, 43,  0,  0,  0,255,255,  4,192, 50,  0
        db   0,  2, 50,  0,  0,  0,  4,192, 50,  0,  0,  2,  4,192, 50,  0,  0,  0, 50
        db   0,  0,  2,  4,192, 45,  0,  0,  0, 45,  0,  0,  2, 45,  0,  0,  0,  4,192
        db  42,  0,  0,  2, 42,  0,  0,  2, 45,  0,  0,  2, 45,  0,  0,  0,  4,192, 45
        db   0,  0,  2, 45,  0,  0,  0,  4,192, 41,  0,  0,  2,  4,192, 47,  0,  0,  2
        db  47,  0,  0,  0,  4,192, 43,  0,  0,  2, 43,  0,  0,  0,  4,192, 43,  0,  0
        db   2,255,255,  4,192, 41,  0,  0, 10, 41,  0,  0,  2, 43,  0,  0, 10, 43,  0
        db   0,  2,  4,192, 41,  0,  0,  6, 41,  0,  0,  6,  4,192, 45,  0,  0, 14,255
        db 255,  4,192, 45,  0,  0,  6, 45,  0,  0, 10, 45,  0,  0,  6, 45,  0,  0,  2
        db   4,192, 43,  0,  0,  6, 43,  0,  0, 10, 43,  0,  0,  6, 43,  0,  0,  2,255
        db 255, 45,  0,  0,  6, 45,  0,  0, 10, 45,  0,  0,  6, 45,  0,  0,  2,  4,192
        db  45,  0,  0,  6, 45,  0,  0,  6, 47,  0,  0,  6, 47,  0,  0,  6,255,255,  4
        db 192, 45,  0,  0,  6, 45,  0,  0,  6, 47,  0,  0,  6, 47,  0,  0,  6,  4,192
        db  45,  0,  0,  6, 45,  0,  0,  6, 47,  0,  0,  6, 47,  0,  0,  6,255,255,  4
        db 192, 45,  0,  0, 10, 45,  0,  0,  2, 47,  0,  0, 10, 47,  0,  0,  2,  4,192
        db  45,  0,  0,  6, 45,  0,  0,  6, 47,  0,  0,  6, 47,  0,  0,  6,255,255,  4
        db 192, 48,  0,  0,  0, 48,  0,  0,  2, 48,  0,  0,  0,  4,192, 47,  0,  0,  2
        db   4,192, 48,  0,  0,  2,  4,192, 50,  0,  0,  2,  4,192, 48,  0,  0,  0, 48
        db   0,  0,  2, 48,  0,  0,  0,  4,192, 47,  0,  0,  2,  4,192, 48,  0,  0,  2
        db  48,  0,  0,  0,  4,192, 52,  0,  0,  2, 52,  0,  0,  2, 52,  0,  0,  0,  4
        db 192, 43,  0,  0,  2, 43,  0,  0,  0,  4,192, 48,  0,  0,  2, 48,  0,  0,  2
        db  48,  0,  0,  0,255,255,  4,192, 54,  0,  0,  2, 54,  0,  0,  0,  4,192, 52
        db   0,  0,  2,  4,192, 54,  0,  0,  0, 54,  0,  0,  2,  4,192, 50,  0,  0,  0
        db  50,  0,  0,  2, 50,  0,  0,  0,  4,192, 45,  0,  0,  2, 45,  0,  0,  2, 48
        db   0,  0,  2, 48,  0,  0,  0,  4,192, 47,  0,  0,  2, 47,  0,  0,  0,  4,192
        db  45,  0,  0,  2,  4,192, 50,  0,  0,  2, 50,  0,  0,  0,  4,192, 48,  0,  0
        db   2, 48,  0,  0,  0,  4,192, 47,  0,  0,  2,255,255,  4,192, 45,  0,  0, 10
        db  45,  0,  0,  2, 47,  0,  0, 10, 47,  0,  0,  2,  4,192, 45,  0,  0,  6, 45
        db   0,  0,  6,  4,192, 48,  0,  0, 14,255,255,  3,192,  9,  3, 33,  1, 21,  0
        db   0,  0,  8,192, 20,224,  8,  0,  0,  2,  3,192, 19,  1, 21,  1,  9,  3, 21
        db   1, 33,  0,  0,  0,  8,192, 20,224,  8,  0,  0,  2,  3,192, 11,  1, 23,  1
        db  12,  3, 36,  0,  0,  0, 24,  1,  8,192, 20,224,  8,  0,  0,  2,  3,192, 24
        db   1, 36,  0,  0,  0, 12,  3, 24,  1, 36,  0,  0,  0,  8,192, 20,224,  8,  0
        db   0,  0,  3,192, 24,  0,  0,  0, 13,  1, 25,  0,  0,  0,255,255,  3,192, 14
        db   2,  0,  0, 14,  1, 26,  0,  0,  0,  8,192, 20,224,  8,  0,  0,  2,  3,192
        db  24,  1, 26,  0,  0,  0, 14,  3, 14,  1, 26,  0,  0,  0,  8,192, 20,224,  8
        db   0,  0,  2,  3,192, 14,  1, 26,  1,  5,  3, 17,  1, 29,  0,  0,  0,  8,192
        db  20,224,  8,  0,  0,  0,  3,192, 29,  0,  0,  0, 17,  1, 29,  0,  0,  0,  7
        db   3, 19,  1, 31,  0,  0,  0,  8,192, 20,224,  8,  0,  0,  0,  3,192, 31,  1
        db  19,  1,  8,192, 20,224,  8,  0,  0,  0,255,255,  3,192, 14,  3, 26,  1, 14
        db   0,  0,  0,  8,192, 20,224,  8,  0,  0,  2,  3,192, 14,  1, 26,  1, 16,  3
        db  26,  1, 28,  0,  0,  0,  8,192, 20,224,  8,  0,  0,  2,  3,192, 16,  1, 28
        db   1, 17,  3, 29,  0,  0,  0, 41,  1,  8,192, 20,224,  8,  0,  0,  2,  3,192
        db  29,  1, 41,  0,  0,  0, 19,  3, 31,  1, 43,  0,  0,  0,  8,192, 20,224,  8
        db   0,  0,  0,  3,192, 31,  0,  0,  0, 43,  1, 31,  0,  0,  0,255,255,  3,192
        db  14,  3, 26,  1, 14,  0,  0,  0,  8,192, 20,224,  8,  0,  0,  2,  3,192, 14
        db   1, 26,  1, 16,  3, 26,  1, 28,  0,  0,  0,  8,192, 20,224,  8,  0,  0,  2
        db   3,192, 16,  1, 28,  1, 17,  3, 29,  0,  0,  0, 41,  1,  8,192, 20,224,  8
        db   0,  0,  2,  3,192, 29,  1, 41,  0,  0,  0,  9,  7, 26,  0, 14,224,126,  6
        db 255,255, 32, 34, 67,114,111,111,110,101,114, 34, 32,119, 97,115, 32, 99,111
        db 110,118,101,114,116,101,100, 32,102,114,111,109, 32,116,104,101, 32, 67, 54
        db  52, 32,111,114,105,103,105,110, 97,108, 32, 40, 66,121, 32, 84,104,111,109
        db  97,115, 32, 34, 68, 82, 65, 88, 34, 32, 77,111,103,101,110,115,101,110, 41
        db  32,116,111, 32,116,104,101, 32, 80, 67, 32, 98,121, 32, 74, 67, 72, 47, 86
        db 105, 98,114, 97,110,116,115, 46, 32,255,255


PDATA ends
; *****************************************************************************
; Entry point!
; *****************************************************************************

code    SEGMENT PARA PUBLIC 'code'
	ASSUME cs:code, ds:PDATA, es:code, ss:code


	jmp     start


; *****************************************************************************

MusicDriver     proc

	; General-purpose Music Driver call

MusicPatch      label
	nop

	call    dword ptr cs:[Player]
	ret

Player  DW      0,0

MusicDriver     endp

; *****************************************************************************

newint1c        proc

	; New interrupt 1c!

	push    ax
	push    si

	mov     ah, 3                   ; Update music
	call    MusicDriver

	pop     si
	pop     ax

	pushf
	call    dword ptr cs:[oldint1c]

	iret

	oldint1c        dw      0

newint1c        endp

; *****************************************************************************
; Main code!
; *****************************************************************************

start:
NoBounce:
	push    cs
	pop     ds

	mov     ax, PDATA
	mov     Player[2], ax

	mov     ah, 6
	call    MusicDriver

	jnc     InitializedOk           ; card was there, it's ok

	; Card not there, so patch code to use a RET instead of NOP
	; This way, no extra coding involved to cancel calls to
	; the player.  This test program doesn't do anything BUT
	; play music, so ... :)
	mov     byte ptr cs:[MusicPatch], 0C3h

InitializedOk:
	; Initialize the music now
	mov     ah, 0                           ; funciton 0, init music
	mov     bx, PDATA                       ; segment of MUSIC
	mov     cx, MusicOffset                 ; offset of MUSIC
	call    MusicDriver

	mov     ah, 2                           ; Not sure what this one does, but it's required
	mov     bx, 0
	call    MusicDriver

	; Music all initialized ...
	; Note that si is destroyed in calls to MusicDriver, so if you're using it, you'd
	; better save and restore it!

	; *****************************************************************************
	; Set the CPS of the song ...
	; *****************************************************************************

	push    ds
	mov     ax, PDATA
	mov     ds, ax

	; Which version of music file are we using?  If it's version > 01.14, then the
	; CPS of the song is stored in the 9th byte.  < 01.14, and it's the second byte.
	mov     bx, MusicOffset
	cmp     word ptr [bx], 0434ah   ; "JC"
	jne     _old_vers

	mov     bx, MusicOffset+8
	jmp     _init_loc1

_old_vers:
	mov     bx, MusicOffset+1

_init_loc1:
	; Get CPS
	mov     al, byte ptr [bx]
	xor     ah, ah
	pop     ds

	; Set the calls to the timer to our CPS.
	mov     bx, ax                  ; Figure out 1193180/cycles to get
	mov     ax, 34DCh               ; proper divisor for timer
	mov     dx, 12h
	div     bx

	mov     al, 00110110b           ; Set timer interrupt 0 to the
	out     43h, al                 ; divisor
	out     40h, al
	mov     al, ah
	out     40h, al

	; *****************************************************************************

	; Save old interrupt
	mov     ax, 351ch
	int     21h
	mov     word ptr [oldint1c], bx
	mov     word ptr [oldint1c+2], es

	; Put in new interrupt
	push    ds
	mov     ax, seg newint1c
	mov     ds, ax
	mov     dx, offset newint1c
	mov     ax, 251ch
	int     21h
	pop     ds




;---------------------------------------------------

       call    cs:GetKey
	; Put in old interrupt
	push    ds
	mov     ax, word ptr [oldint1c+2]
	mov     ds, ax
	mov     dx, word ptr [oldint1c]
	mov     ax, 251ch
	int     21h
	pop     ds

	; Shut down music
	mov     ah, 2
	mov     bx, 0
	call    MusicDriver

	; Reset timer to standard ...
	mov     al, 00110110b
	out     43h, al
	mov     ax, 65535
	out     40h, al
	mov     al, ah
	out     40h, al

	; Outta here!
	mov     ax, 4c00h
	int     21h





GetKey          PROC
		xor     ax,ax                   ; AH=0, wait for key
		int     16h                     ; perform KBD interrupt
		ret
GetKey          ENDP                


attr_reg        equ     03c0h
crtc_reg        equ     03d4h
input1_reg      equ     03dah
text_seg        equ     0b800h
mem_add         dw      1920
bounceval       db      25
bouncespeeds    db      25 dup(16)


   code    ENDS
END     start
